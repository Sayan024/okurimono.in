<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Okurimono.in ‚Äî Posters & Frames</title>
<meta name="description" content="Okurimono.in premium posters & frames ‚Äî Kodak 180 GSM.">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;800;900&family=Anton&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0f1020; --accent1:#e91e63; --accent2:#ff80ab; --accent3:#9c27b0;
    --neon:#ccff00; --text:#f9f9f9; --muted:#c7b9c9; --card:#13121a;
    --max-content-width:1200px;
  }

  /* Reset / Base */
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Montserrat',system-ui,Arial,sans-serif}
  html { scroll-behavior: smooth; }
  body{background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;overflow-x:hidden;line-height:1.35}

  /* SECTION helper: each major block is full width; inner container centers */
  .section { width:100%; padding:30px 0; }
  .container { max-width:var(--max-content-width); margin:0 auto; padding:0 20px; }

  /* header / nav */
  .header-wrap{position:sticky;top:0;z-index:999;background:linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.06));backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,0.02)}
  .header-inner{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 20px;max-width:var(--max-content-width);margin:0 auto}
  .logo{font-weight:900;font-size:20px;background:linear-gradient(90deg,var(--accent1),var(--accent3));-webkit-background-clip:text;color:transparent}
  nav.primary { display:flex; gap:8px; align-items:center; }
  nav.primary a{color:var(--text);text-decoration:none;padding:8px 10px;border-radius:8px;font-weight:600}
  nav.primary a:hover, nav.primary a.active{background:rgba(255,255,255,0.02)}

  /* cart button styling */
  .cart-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--text);cursor:pointer;font-weight:700}

  /* hamburger for mobile */
  .hamburger { display:none; width:44px;height:44px;border-radius:8px;border:1px solid rgba(255,255,255,0.04); background:transparent; align-items:center; justify-content:center; cursor:pointer }
  .hamburger div{width:20px;height:2px;background:var(--text);position:relative}
  .mobile-nav { display:none; position:absolute; top:64px; right:20px; background:var(--card); border-radius:10px; padding:12px; box-shadow:0 10px 30px rgba(0,0,0,0.6) }

  /* Top offer (full width) */
  .top-offer{background:linear-gradient(90deg,var(--accent1),var(--accent3));color:white;padding:8px;text-align:center;font-weight:700}

  /* HERO: full-bleed content under container */
  .hero.section { padding:18px 0 8px 0; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); }
  .hero-inner{width:100%; padding:24px 0; background:transparent}
  .hero-inner .container { display:block; } /* use container as centering boundary */

  .hero-headline{
    font-family:'Anton',sans-serif;
    font-size:56px;
    line-height:1.02;
    color:var(--text);
    letter-spacing:-1px;
    max-width:100%;
    word-break:break-word;
    margin-bottom:8px;
  }
  .hero-headline .highlight{
    display:inline-block;
    background:var(--neon);
    color:#050505;
    padding:6px 10px;
    transform:skewX(-8deg) translateY(-6px);
    margin-left:6px;
    border-radius:6px;
  }
  .hero-sub{color:var(--muted);font-size:15px;max-width:100%}
  .cta-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
  .btn{padding:10px 18px;border-radius:26px;border:0;cursor:pointer;font-weight:700}
  .btn-primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white}
  .btn-outline{background:transparent;border:2px solid var(--accent2);color:var(--accent2)}

  .promo-row{margin-top:8px;color:var(--muted);display:flex;gap:8px;align-items:center}
  #promoLoop{font-weight:800}

  /* HERO CARDS (three images) */
  .hero-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:12px}
  .hero-card{background:var(--card);border-radius:12px;overflow:hidden;position:relative;min-height:160px;display:flex;flex-direction:column}
  .hero-card img{width:100%;height:100%;object-fit:cover;display:block;border-radius:8px}
  .hero-card .meta{padding:8px;color:var(--muted);font-size:13px}
  .hero-card .buy-wrap{position:absolute;right:12px;bottom:12px}

  /* scrolling strip styles */
  .scrolling-strip .scroller{display:flex;gap:12px;align-items:center;padding:8px 0;transform:translateX(0);will-change:transform}
  .strip-card{min-width:220px;height:120px;border-radius:12px;overflow:hidden;background:var(--card);flex-shrink:0;position:relative}
  .strip-card img{width:100%;height:100%;object-fit:cover}
  .strip-card .buy-wrap{position:absolute;right:8px;bottom:8px}

  /* Controls & Gallery */
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin:18px 0}
  .filter-btn{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 14px;border-radius:30px;color:var(--text);cursor:pointer}
  .filter-btn.active{background:linear-gradient(90deg,var(--accent1),var(--accent3));border:none;color:white}

  .gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;align-items:start}
  .poster-card{border-radius:12px;overflow:hidden;position:relative;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:block}
  .poster-card img{width:100%;height:100%;display:block;object-fit:cover}
  .poster-card .meta{position:absolute;left:12px;top:12px;background:rgba(0,0,0,0.35);padding:6px 8px;border-radius:8px;font-size:13px}
  .poster-card .buy-wrap{position:absolute;right:12px;bottom:12px}

  /* pagination styling */
  .pagination{display:flex;gap:8px;align-items:center;justify-content:center;margin:18px 0}
  .page-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.08);
    padding:8px 12px;
    border-radius:8px;
    color:var(--text);
    cursor:pointer;
    min-width:40px;
    text-align:center;
    font-weight:700;
  }
  .page-btn:hover{background:rgba(255,255,255,0.03)}
  .page-btn.active{background:linear-gradient(90deg,var(--accent1),var(--accent3));color:#fff;border:0; box-shadow: 0 8px 20px rgba(156,39,176,0.12)}

  /* product/combo/custom-print/frames */
  .product, .combo-section, .features, .reviews, .policy, .shipping, .faq {background:var(--card);border-radius:12px;padding:20px;margin:30px 0}
  .combo-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}
  .combo-item{position:relative;border-radius:8px;overflow:hidden}
  .combo-item img{width:100%;height:100%;object-fit:cover;display:block}

  /* custom-print responsive improvements (requested) */
  .custom-print{display:flex;gap:22px;align-items:flex-start;padding:20px;border-radius:14px;background:linear-gradient(90deg, rgba(14,78,71,0.06), rgba(21,31,42,0.02));flex-wrap:wrap}
  .custom-print .left{flex:1 1 360px;min-width:260px}
  .custom-print .right{flex:0 0 320px;display:flex;align-items:center;justify-content:center}
  .custom-print .fancy-title{font-family:'Anton', sans-serif;font-size:26px;background: linear-gradient(90deg,#00C6A7,#006E6A);-webkit-background-clip:text;color:transparent;margin-bottom:8px}
  .custom-print .custom-desc{color:var(--muted);line-height:1.5; margin-bottom:10px}
  /* larger tap targets on mobile */
  .custom-print .contact-cta{display:flex;gap:10px;flex-wrap:wrap}
  .custom-print .contact-cta .btn{padding:12px 18px;border-radius:12px;font-weight:800}

  /* frame gallery */
  .frame-gallery{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:18px;align-items:start}
  .frame-wrap{position:relative;border-radius:12px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));min-height:260px;display:flex;align-items:center;justify-content:center}
  .frame-wrap img{width:100%;height:100%;object-fit:cover;border-radius:8px}
  .frame-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
  .frame{box-sizing:content-box;width:100%;height:100%;border-radius:10px}
  .frame.black{border:10px solid #000;border-radius:10px}
  .frame.white{border:8px solid #fff;border-radius:10px;opacity:0.95}
  .frame-wrap .buy-wrap{position:absolute;right:12px;bottom:12px}

  /* contact (no call) */
  .contact { display:flex; gap:12px; align-items:center; padding:18px; border-radius:12px; background:var(--card) }
  .contact a, .contact button { color:var(--accent2); text-decoration:none; font-weight:700; background:transparent; border:0; cursor:pointer }

  /* cart section */
  .cart-section { background:var(--card); border-radius:12px; padding:20px; margin:30px 0; }
  .cart-list { display:grid; gap:12px; }
  .cart-item { display:flex; gap:12px; align-items:center; padding:10px; background:rgba(255,255,255,0.02); border-radius:10px; }
  .cart-item img { width:92px; height:92px; object-fit:cover; border-radius:8px; flex-shrink:0; }
  .cart-item .title { font-weight:700; }
  .qty-controls { display:flex; gap:8px; align-items:center; }
  .qty-controls button { padding:6px 10px; border-radius:8px; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.04); color:var(--text); cursor:pointer; }
  .cart-summary { margin-top:12px; padding-top:12px; border-top:1px solid rgba(255,255,255,0.04); }
  .summary-row { display:flex; justify-content:space-between; padding:6px 0; color:var(--muted); }
  .summary-row.total { font-weight:800; color:var(--text); }

  /* lightbox */
  #lightbox { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 9999; }
  #lightbox.active { display: flex; }
  #lightbox .backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.95); }
  #lightbox .content { position: relative; max-width: 900px; width: 92%; margin: 20px; z-index: 2; text-align: center; color: #fff; }
  #lightbox img { width: 100%; max-height: 65vh; object-fit:contain; border-radius: 8px; box-shadow: 0 30px 80px rgba(0,0,0,0.7); }
  #lightbox .desc { margin-top: 10px; color: #fff; font-size: 14px; line-height: 1.4; background: rgba(255,255,255,0.02); padding: 10px; border-radius: 8px; max-height: 22vh; overflow:auto; }
  #lightbox .close { position: absolute; right: -12px; top: -12px; background: rgba(255,255,255,0.06); color: #fff; border-radius: 50%; width:44px; height:44px; display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:22px; }
  #lightbox .nav { position: absolute; top: 50%; transform: translateY(-50%); width: 100%; left: 0; z-index: 3; display:flex;justify-content:space-between;pointer-events:none; }
  #lightbox .nav button { pointer-events:auto; background: rgba(255,255,255,0.04); border:0; color:#fff; width:48px; height:48px; border-radius:50%; cursor:pointer; }

  /* buy button */
  .buy-btn{background:linear-gradient(90deg,var(--accent1),var(--accent3));color:#fff;border:0;padding:8px 12px;border-radius:20px;cursor:pointer;font-weight:700}

  /* Payment select black background */
  #paymentMethod { background: #000 !important; color: #fff !important; }

  /* responsive/mobile */
  @media(max-width:1100px){
    .hero-headline{font-size:44px}
    .frame-wrap{min-height:220px}
    .custom-print .right{flex:0 0 260px}
  }
  @media(max-width:880px){
    .hero-headline{font-size:36px}
    .hero-cards{grid-template-columns:repeat(2,1fr)}
    .frame-gallery{grid-template-columns:repeat(2,minmax(0,1fr))}
    .hamburger{display:flex}
    nav.primary{display:none}
    .mobile-nav{display:none}
    /* custom print: stack left + right for mobile */
    .custom-print{flex-direction:column;align-items:flex-start}
    .custom-print .right{width:100%;flex:1}
    .custom-print .left{width:100%}
    .custom-print .contact-cta{width:100%;justify-content:flex-start}
    .cart-item { flex-direction:column; align-items:flex-start; }
    .cart-item img { width:100%; height:auto; }
  }
  @media(max-width:560px){
    .hero-headline{font-size:28px}
    .hero-cards{grid-template-columns:repeat(1,1fr)}
    .frame-gallery{grid-template-columns:repeat(1,minmax(0,1fr))}
    .strip-card{min-width:160px;height:100px}
    .hero-card img{height:120px}
    .hero-card{min-height:140px}
    .contact{flex-direction:column;align-items:flex-start}
    .custom-print .right{display:block}
  }
  @media(prefers-reduced-motion: reduce){
    * { animation: none !important; transition: none !important; }
  }

  /* small toast */
  .toast {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 28px;
    background: rgba(0,0,0,0.8);
    color: #fff;
    padding: 10px 14px;
    border-radius: 8px;
    z-index: 99999;
    box-shadow: 0 8px 20px rgba(0,0,0,0.6);
    font-weight:700;
    display:none;
  }

</style>
</head>
<body>

  <!-- top offer full width -->
  <div class="top-offer">üéâ Limited Offer ‚Äî 6 Premium A4 Posters for ‚Çπ259 (was ‚Çπ299)! Free Delivery & COD (T&C apply) üéâ</div>

  <!-- header -->
  <header class="header-wrap">
    <div class="header-inner">
      <div class="logo">Okurimono.in</div>

      <!-- primary nav (desktop) -->
      <nav class="primary" id="navPrimary">
        <a href="#gallery" data-target="gallery">Gallery</a>
        <a href="#product" data-target="product">Product</a>
        <a href="#frameGallerySection" data-target="frameGallerySection">Frames</a>
        <a href="#contact" data-target="contact">Contact</a>
      </nav>

      <div style="display:flex;align-items:center;gap:10px">
        <button class="cart-btn" id="openCartBtn">Cart (0)</button>
        <button class="hamburger" id="hamburgerBtn" aria-label="Open menu"><div></div></button>
      </div>

      <!-- mobile menu (rendered by JS) -->
      <div id="mobileNav" class="mobile-nav" aria-hidden="true"></div>
    </div>
  </header>

  <!-- HERO - full width -->
  <section class="section hero" id="hero">
    <div class="hero-inner">
      <div class="container">
        <h1 class="hero-headline">
          <span>COLLECT</span>
          <span class="highlight">POSTERS & FRAMES</span>
          <div style="display:block">FOR YOU</div>
        </h1>

        <p class="hero-sub">Latest poster drops, curated frames and gift-ready prints ‚Äî bold typography & layered visuals.</p>

        <div class="cta-row">
          <a class="btn btn-outline" href="#gallery">Explore</a>
          <button class="btn btn-primary" id="customizeBtn">Customize</button>
        </div>

        <div class="promo-row" style="margin-top:10px">
          <span style="color:var(--muted)">Trending:</span>
          <span id="promoLoop">Limited Drops</span>
        </div>

        <div class="hero-cards" id="heroCards"></div>
      </div>
    </div>
  </section>

  <!-- scrolling strip (uses separate JS array) -->
  <section class="section scrolling-strip">
    <div class="container">
      <div class="scroller" id="autoScroller"></div>
    </div>
  </section>

  <!-- controls -->
  <section class="section">
    <div class="container">
      <div class="controls" id="controls">
        <button class="filter-btn active" data-cat="">All</button>
        <button class="filter-btn" data-cat="anime">Anime</button>
        <button class="filter-btn" data-cat="cars">Cars</button>
        <button class="filter-btn" data-cat="music">Music</button>
        <button class="filter-btn" data-cat="quotes">Quotes</button>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section class="section" id="gallery">
    <div class="container">
      <div id="galleryGrid" class="gallery-grid" role="list"></div>
      <div id="pagination" class="pagination" aria-label="Gallery pagination"></div>
    </div>
  </section>

  <!-- PRODUCT -->
  <section class="section" id="product">
    <div class="container">
      <div id="productInner" class="product"></div>
    </div>
  </section>

  <!-- COMBOS -->
  <section class="section" id="combos">
    <div class="container">
      <h3 id="combo-heading">Combo Offers</h3>
      <p style="color:var(--muted)">Mix & match portrait and landscape posters in your 6-poster combo.</p>
      <div id="comboGrid" class="combo-grid" role="list"></div>
    </div>
  </section>

  <!-- CUSTOM PRINT -->
  <section class="section custom-print" id="customPrint">
    <div class="container" style="display:flex;align-items:flex-start;gap:20px">
      <div class="left">
        <div class="fancy-title">Custom Printed Frames for Special Occasions</div>
        <p class="custom-desc">Celebrate birthdays, anniversaries and memories with a framed poster. We print on Kodak 180 GSM, finish and frame to gift-ready standards ‚Äî secure packaging and preview before dispatch.</p>
        <div class="contact-cta" style="margin-top:8px">
          <button class="btn btn-primary" id="customWhatsAppBtn">Message for Custom Order</button>
          <a class="btn btn-outline" href="#contact">Contact</a>
        </div>
      </div>
      <div class="right">
        <div class="custom-frame" id="customFrameDemo" style="position:relative">
          <img src="https://picsum.photos/seed/frame/400/600" alt="frame demo" data-title="Birthday Frame" style="width:100%;height:320px;object-fit:cover;border-radius:8px">
          <div style="position:absolute;right:12px;bottom:12px"><button class="buy-btn add-to-cart" data-id="frame-demo" data-title="Birthday Frame" data-src="https://picsum.photos/seed/frame/400/600">Add to cart</button></div>
        </div>
      </div>
    </div>
  </section>

  <!-- FRAME GALLERY -->
  <section class="section" id="frameGallerySection">
    <div class="container">
      <h3 style="margin-bottom:12px">Frame Gallery (Preview frames over posters)</h3>
      <div id="frameGrid" class="frame-gallery"></div>
    </div>
  </section>

  <!-- REVIEWS -->
  <section class="section reviews" id="reviews">
    <div class="container">
      <h3>Customer Reviews & Instagram</h3>
      <div style="display:grid;gap:10px;margin-top:10px">
        <div style="background:var(--card);padding:12px;border-radius:10px">‚ÄúGreat colors and quick delivery ‚Äî Sayan‚Äù</div>
        <div style="background:var(--card);padding:12px;border-radius:10px">‚ÄúPerfect gift for birthday ‚Äî Ananya‚Äù</div>
      </div>
    </div>
  </section>

  <!-- POLICY -->
  <section class="section policy">
    <div class="container">
      <h3>Payment, COD & Return Policy</h3>
      <p style="color:var(--muted)"><strong>Prepaid:</strong> Instant confirmation via UPI/PhonePe/Paytm. Custom orders may request a small ‚Çπ50 advance.</p>
      <p style="color:var(--muted)"><strong>COD:</strong> COD available with handling fee (e.g., ‚Çπ90). Full COD-only bundles may be priced higher (e.g., ‚Çπ350).</p>
      <p style="color:var(--muted)"><strong>Returns:</strong> Record an unboxing video at delivery. Report damage within 48 hours with video & photos; we will replace damaged items at no extra cost.</p>
    </div>
  </section>

  <!-- SHIPPING -->
  <section class="section shipping">
    <div class="container">
      <h3>Shipping</h3>
      <p style="color:var(--muted)">Free delivery PAN India via DTDC or equivalent. Delivery estimate: 5‚Äì6 working days after dispatch.</p>
    </div>
  </section>

  <!-- CART SECTION -->
  <section class="section" id="cartSection" aria-hidden="true" style="display:none;">
    <div class="container">
      <div class="cart-section">
        <h3>Your Cart (<span id="cartCount">0</span>)</h3>
        <div id="cartList" class="cart-list"></div>

        <div class="cart-summary" id="cartSummary">
          <div class="summary-row"><div>Items total</div><div id="itemsTotal">‚Çπ0</div></div>
          <div class="summary-row"><div>COD fee (if COD)</div><div id="codFee">‚Çπ0</div></div>
          <div class="summary-row"><div>Advance now (if applicable)</div><div id="advanceNow">‚Çπ0</div></div>
          <div class="summary-row total"><div>Grand Total</div><div id="grandTotal">‚Çπ0</div></div>

          <div style="margin-top:12px">
            <label style="display:block;margin-bottom:8px;color:var(--muted)">Payment Method</label>
            <select id="paymentMethod" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);color:var(--text)">
              <option value="upi">UPI (full)</option>
              <option value="cod">Cash on Delivery (+‚Çπ75)</option>
              <option value="advance">Advance (Special: if total posters ‚â• 6 pay ‚Çπ50 now)</option>
            </select>
          </div>

          <div style="margin-top:12px">
            <button id="checkoutBtn" class="btn btn-primary">Checkout via WhatsApp</button>
            <button id="closeCartBtn" class="btn btn-outline" style="margin-left:8px">Close</button>
          </div>

          <div style="margin-top:12px;color:var(--muted);font-size:14px">
            <strong>Damage / Transit:</strong> If any product is damaged or torn on transit, record the unboxing video and share with us within 48 hours. We'll replace damaged items free of cost with no extra charges.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT: NO CALL - leave a WhatsApp message -->
  <section class="section" id="contact">
    <div class="container">
      <div class="contact">
        <div class="col">
          <h3>Contact Us</h3>
          <p style="color:var(--muted)">Please do not call ‚Äî <strong>leave us a WhatsApp message</strong> and we'll reply quickly.</p>
          <p><strong>WhatsApp:</strong>
            <button class="buy-btn" id="contactWhatsAppBtn">Message on WhatsApp</button>
          </p>
          <p><strong>Instagram:</strong> <a href="https://instagram.com/okurimono.in" target="_blank" rel="noopener">@okurimono.in</a></p>
        </div>
        <div class="col" style="min-width:220px">
          <p style="color:var(--muted)"><strong>Business Hours</strong></p>
          <p>Open all day ‚Äî 24/7</p>
          <p style="color:var(--muted);font-size:13px">Do not call ‚Äî please leave a message on WhatsApp.</p>
        </div>
      </div>
    </div>
  </section>

  <footer class="section" style="padding-top:8px;padding-bottom:20px">
    <div class="container" style="text-align:center;color:var(--muted)">¬© Okurimono.in ‚Ä¢ DM @okurimono.in</div>
  </footer>

  <!-- LIGHTBOX -->
  <div id="lightbox" aria-hidden="true" role="dialog" aria-label="Image preview">
    <div class="backdrop" id="lbBackdrop"></div>
    <div class="content" role="document" id="lbContent">
      <button class="close" id="lbClose" aria-label="Close">√ó</button>
      <div class="nav">
        <button id="lbPrev" aria-label="Previous">‚Äπ</button>
        <button id="lbNext" aria-label="Next">‚Ä∫</button>
      </div>
      <img src="" alt="" id="lbImage">
      <div class="desc" id="lbDesc"></div>
    </div>
  </div>

  <!-- toast -->
  <div id="toast" class="toast">Already in cart</div>

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<script>
/* === Data arrays (framesData now include cat to support frame filtering) === */
const heroUploadedImages = [
  'https://mo4dwpnnzycp1ede.public.blob.vercel-storage.com/heroImg1.png',
  'https://mo4dwpnnzycp1ede.public.blob.vercel-storage.com/heroImg2.png',
  'https://mo4dwpnnzycp1ede.public.blob.vercel-storage.com/heroImg3.png'
];

const posters = [
  {id:1, src:'https://picsum.photos/seed/an1/420/600', title:'Anime Sunset', cat:'anime'},
  {id:2, src:'https://picsum.photos/seed/car1/600/350', title:'Speed Machine', cat:'cars'},
  {id:3, src:'https://picsum.photos/seed/m1/420/600', title:'Beat Drops', cat:'music'},
  {id:4, src:'https://picsum.photos/seed/q1/420/600', title:'Motivational Quote', cat:'quotes'},
  {id:5, src:'https://picsum.photos/seed/car2/600/350', title:'Classic Ride', cat:'cars'},
  {id:6, src:'https://picsum.photos/seed/an2/420/600', title:'Neon Warrior', cat:'anime'},
  {id:7, src:'https://picsum.photos/seed/extra1/420/600', title:'Extra 1', cat:'music'},
  {id:8, src:'https://picsum.photos/seed/extra2/600/350', title:'Extra 2', cat:'cars'},
  {id:9, src:'https://picsum.photos/seed/extra3/420/600', title:'Extra 3', cat:'quotes'},
  {id:10, src:'https://picsum.photos/seed/extra4/420/600', title:'Extra 4', cat:'anime'}
];

const scrollingPosters = [
  {id:'s1', src:'https://picsum.photos/seed/strip1/420/260', title:'Strip Poster 1'},
  {id:'s2', src:'https://picsum.photos/seed/strip2/420/260', title:'Strip Poster 2'},
  {id:'s3', src:'https://picsum.photos/seed/strip3/420/260', title:'Strip Poster 3'},
  {id:'s4', src:'https://picsum.photos/seed/strip4/420/260', title:'Strip Poster 4'},
  {id:'s5', src:'https://picsum.photos/seed/strip5/420/260', title:'Strip Poster 5'}
];

const combos = [
  {id:'c1', src:'https://picsum.photos/seed/c1/400/600', title:'Combo 1'},
  {id:'c2', src:'https://picsum.photos/seed/c2/400/600', title:'Combo 2'},
  {id:'c3', src:'https://picsum.photos/seed/c3/600/400', title:'Combo 3'}
];

/* === IMPORTANT CHANGE: framesData now has a 'cat' field so filter buttons can filter frames ===
   Map frames to categories (change cat values as you like).
*/
const framesData = [
  {id:'f1', src:'https://picsum.photos/seed/f1/600/800', title:'Framed Black', frameType:'black', cat:'cars'},
  {id:'f2', src:'https://picsum.photos/seed/f2/600/800', title:'Framed White', frameType:'white', cat:'anime'},
  {id:'f3', src:'https://picsum.photos/seed/f3/600/800', title:'Framed Black 2', frameType:'black', cat:'music'}
];

const WA_PHONE = '918617743811';

/* === Cart state & DOM refs === */
let cart = []; // items: { id, title, src, qty }
const galleryGrid = document.getElementById('galleryGrid');
const paginationEl = document.getElementById('pagination');
const heroCardsEl = document.getElementById('heroCards');
const scrollerEl = document.getElementById('autoScroller');
const comboGrid = document.getElementById('comboGrid');
const frameGrid = document.getElementById('frameGrid');
const productInner = document.getElementById('productInner');

const openCartBtn = document.getElementById('openCartBtn');
const cartSection = document.getElementById('cartSection');
const cartList = document.getElementById('cartList');
const cartCountEl = document.getElementById('cartCount');
const itemsTotalEl = document.getElementById('itemsTotal');
const codFeeEl = document.getElementById('codFee');
const advanceNowEl = document.getElementById('advanceNow');
const grandTotalEl = document.getElementById('grandTotal');
const paymentMethodEl = document.getElementById('paymentMethod');
const checkoutBtn = document.getElementById('checkoutBtn');
const closeCartBtn = document.getElementById('closeCartBtn');
const toastEl = document.getElementById('toast');

function esc(s){ return String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* === Renderers === */
function renderHeroImages(){
  heroCardsEl.innerHTML = heroUploadedImages.map((src,i)=>`
    <div class="hero-card" data-idx="${i}">
      <img src="${esc(src)}" alt="Featured ${i+1}">
      <div class="meta">Featured design ${i+1}</div>
      <div class="buy-wrap"><button class="buy-btn add-to-cart" data-id="hero-${i}" data-title="Featured design ${i+1}" data-src="${esc(src)}">Add to cart</button></div>
    </div>
  `).join('');
}

function renderScrollingStrip(){
  const items = scrollingPosters.concat(scrollingPosters);
  scrollerEl.innerHTML = items.map(p=>`
    <div class="strip-card">
      <img src="${esc(p.src)}" alt="${esc(p.title)}">
      <div class="buy-wrap"><button class="buy-btn add-to-cart" data-id="${esc(p.id)}" data-title="${esc(p.title)}" data-src="${esc(p.src)}">Add to cart</button></div>
    </div>`).join('');
}

const ITEMS_PER_PAGE = 8;
let activeCategory = '';
let currentPage = 1;

function paginate(arr,page=1,per=ITEMS_PER_PAGE){
  const pages = Math.max(1, Math.ceil(arr.length/per));
  const start = (page-1)*per;
  return { items: arr.slice(start,start+per), pages };
}
function renderGallery(page=1){
  currentPage = page;
  const filtered = activeCategory ? posters.filter(p => p.cat === activeCategory) : posters.slice();
  const { items, pages } = paginate(filtered, page);
  galleryGrid.innerHTML = items.map(p=>{
    return `<div class="poster-card" data-id="${p.id}">
      <img src="${esc(p.src)}" alt="${esc(p.title)}" data-title="${esc(p.title)}">
      <div class="meta">${esc(p.title)}</div>
      <div class="buy-wrap"><button class="buy-btn add-to-cart" data-id="${p.id}" data-title="${esc(p.title)}" data-src="${esc(p.src)}">Add to cart</button></div>
    </div>`;
  }).join('');
  renderPagination(pages, page);
  bindInteractiveElements(); // rebind after render
}
function renderPagination(totalPages, activePage){
  paginationEl.innerHTML = '';
  if(totalPages <= 1) return;
  const prev = document.createElement('button'); prev.className='page-btn'; prev.innerText='Prev'; prev.disabled = activePage <= 1;
  prev.addEventListener('click', ()=> renderGallery(Math.max(1, activePage-1)));
  paginationEl.appendChild(prev);
  for(let i=1;i<=totalPages;i++){
    const b = document.createElement('button'); b.className = 'page-btn' + (i===activePage? ' active':''); b.innerText = i;
    b.addEventListener('click', ()=> renderGallery(i));
    paginationEl.appendChild(b);
  }
  const next = document.createElement('button'); next.className='page-btn'; next.innerText='Next'; next.disabled = activePage >= totalPages;
  next.addEventListener('click', ()=> renderGallery(Math.min(totalPages, activePage+1)));
  paginationEl.appendChild(next);
}

function renderCombos(){
  comboGrid.innerHTML = combos.map(c => {
    return `<div class="combo-item" data-id="${esc(c.id)}">
      <img src="${esc(c.src)}" alt="${esc(c.title)}">
      <div style="position:absolute;left:8px;top:8px;background:rgba(0,0,0,0.35);padding:6px;border-radius:8px">${esc(c.title)}</div>
      <div style="position:absolute;right:8px;bottom:8px"><button class="buy-btn add-to-cart" data-id="${esc(c.id)}" data-title="${esc(c.title)}" data-src="${esc(c.src)}">Add to cart</button></div>
    </div>`;
  }).join('');
}

/* Render frames with optional category filter */
function renderFrames(category=''){
  const filtered = category ? framesData.filter(f => f.cat === category) : framesData.slice();
  frameGrid.innerHTML = filtered.map(f => {
    const overlay = `<div class="frame-overlay"><div class="frame ${esc(f.frameType)}"></div></div>`;
    return `<div class="frame-wrap" data-id="${esc(f.id)}" data-cat="${esc(f.cat||'')}">
      <img src="${esc(f.src)}" alt="${esc(f.title)}">
      ${overlay}
      <div class="buy-wrap"><button class="buy-btn add-to-cart" data-id="${esc(f.id)}" data-title="${esc(f.title)}" data-src="${esc(f.src)}">Add to cart</button></div>
    </div>`;
  }).join('');
}

function renderMainProduct(){
  const pTitle = '6-Poster Combo ‚Äî A4 ‚Äî Kodak 180 GSM';
  const pDesc = 'Choose any 6 designs from our gallery or our combos. Printed on Kodak 180 GSM highlight paper for vivid color and long life.';
  productInner.innerHTML = `<div class="product-inner">
    <h2>${esc(pTitle)}</h2>
    <p style="color:var(--muted)">${esc(pDesc)}</p>
    <ul style="color:var(--muted)"><li>A4 size (8.3‚Äù √ó 11.7‚Äù)</li><li>Matte finish option</li><li>5‚Äì6 day delivery</li></ul>
    <div style="margin-top:8px"><button class="btn btn-primary buy-main" data-title="${esc(pTitle)}">Buy Combo</button></div>
  </div>`;
}

/* === Cart logic (unchanged from your last requested behavior) === */

/* find index helper */
function findCartItemIndex(id){
  return cart.findIndex(it => it.id === String(id));
}

/* Add to cart:
   - default quantity when adding a new item is 1
   - if item already exists, do not increment automatically (toast 'Already in cart')
*/
function addToCart(item){
  const id = String(item.id);
  const idx = findCartItemIndex(id);
  if(idx === -1){
    cart.push({ id, title: item.title, src: item.src, qty: 1 }); // default qty = 1
    saveCart();
    refreshCartUI();
    showToast('Added to cart');
  } else {
    showToast('Already in cart');
  }
}

/* Update qty and removal (qty change allowed in cart UI) */
function updateQty(id, qty){
  const idx = findCartItemIndex(id);
  if(idx === -1) return;
  cart[idx].qty = Math.max(1, Math.floor(qty)); // ensure min 1
  saveCart();
  refreshCartUI();
}
function removeFromCart(id){
  const idx = findCartItemIndex(id);
  if(idx === -1) return;
  cart.splice(idx,1);
  saveCart();
  refreshCartUI();
}

/* Pricing rules unchanged */
function unitPriceBasedOnTotalItems(totalItems){
  if(totalItems >= 6 && totalItems <= 15) return 43;
  if(totalItems <= 3) return 60;
  if(totalItems <= 6) return 50;
  return 43;
}

/* computeCartTotals with min qty guard (>=3) */
function computeCartTotals(paymentMethod){
  let itemsTotal = 0;
  let totalQty = 0;
  cart.forEach(item => { totalQty += item.qty; });

  if(totalQty < 3){
    return { itemsTotal: 0, codFee: 0, advanceNow: 0, grandTotal: 0, totalQty, unitPrice: 0 };
  }

  const unit = unitPriceBasedOnTotalItems(totalQty || 0);
  cart.forEach(item => { itemsTotal += unit * item.qty; });

  let codFee = 0;
  if(paymentMethod === 'cod') codFee = 75;

  let advanceNow = 0;
  if(paymentMethod === 'advance' && totalQty >= 6) advanceNow = 50;

  const grandTotal = Math.max(0, itemsTotal + codFee);
  return { itemsTotal, codFee, advanceNow, grandTotal, totalQty, unitPrice: unit };
}

function saveCart(){ try { sessionStorage.setItem('ok_cart_v1', JSON.stringify(cart)); } catch(e){} }
function loadCart(){ try { const raw = sessionStorage.getItem('ok_cart_v1'); if(raw) cart = JSON.parse(raw) || []; } catch(e){} }

function refreshCartUI(){
  const count = cart.reduce((s,it)=>s+it.qty, 0);
  cartCountEl.textContent = count;
  openCartBtn.textContent = `Cart (${count})`;

  if(cart.length === 0){
    cartList.innerHTML = `<div style="color:var(--muted)">Your cart is empty. Add posters from the gallery.</div>`;
  } else {
    cartList.innerHTML = cart.map(it => `
      <div class="cart-item" data-id="${esc(it.id)}">
        <img src="${esc(it.src)}" alt="${esc(it.title)}">
        <div style="flex:1">
          <div class="title">${esc(it.title)}</div>
          <div style="color:var(--muted);font-size:13px;margin-top:6px">Select quantity below.</div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
          <div class="qty-controls">
            <button class="qty-decr" data-id="${esc(it.id)}">-</button>
            <input type="number" min="1" value="${it.qty}" data-count-input style="width:52px;padding:6px;border-radius:6px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.04);color:var(--text)">
            <button class="qty-incr" data-id="${esc(it.id)}">+</button>
          </div>
          <div style="margin-top:6px;color:var(--muted);font-size:14px">Item total: ‚Çπ<span class="item-total">0</span></div>
          <div><button class="btn btn-outline remove-item" data-id="${esc(it.id)}">Remove</button></div>
        </div>
      </div>
    `).join('');
  }

  const pm = paymentMethodEl.value;
  const totals = computeCartTotals(pm);
  itemsTotalEl.textContent = `‚Çπ${totals.itemsTotal.toFixed(0)}`;
  codFeeEl.textContent = totals.codFee ? `‚Çπ${totals.codFee}` : '‚Çπ0';
  advanceNowEl.textContent = totals.advanceNow ? `‚Çπ${totals.advanceNow}` : '‚Çπ0';
  grandTotalEl.textContent = `‚Çπ${(totals.grandTotal).toFixed(0)}`;

  document.querySelectorAll('.cart-item').forEach((el, idx)=>{
    const it = cart[idx];
    const itemTotalEl = el.querySelector('.item-total');
    const countInput = el.querySelector('[data-count-input]');
    if(itemTotalEl){
      itemTotalEl.textContent = totals.unitPrice ? (totals.unitPrice * it.qty).toFixed(0) : '0';
    }
    if(countInput) countInput.value = it.qty;
    if(countInput) {
      countInput.addEventListener('change', (e)=>{
        let v = parseInt(countInput.value) || 1;
        if(v < 1) v = 1;
        updateQty(it.id, v);
      });
    }
  });

  document.querySelectorAll('.qty-incr').forEach(b=>{
    b.addEventListener('click', ()=>{
      const id = b.dataset.id;
      const idx = findCartItemIndex(id);
      if(idx !== -1){ cart[idx].qty += 1; saveCart(); refreshCartUI(); }
    });
  });
  document.querySelectorAll('.qty-decr').forEach(b=>{
    b.addEventListener('click', ()=>{
      const id = b.dataset.id;
      const idx = findCartItemIndex(id);
      if(idx !== -1){
        cart[idx].qty = Math.max(1, cart[idx].qty - 1);
        saveCart(); refreshCartUI();
      }
    });
  });
  document.querySelectorAll('.remove-item').forEach(b=>{
    b.addEventListener('click', ()=>{
      const id = b.dataset.id;
      removeFromCart(id);
    });
  });
}

function openCart(){
  cartSection.style.display = ''; cartSection.setAttribute('aria-hidden','false');
  cartSection.scrollIntoView({ behavior:'smooth', block:'start' });
  refreshCartUI();
}
function closeCart(){
  cartSection.style.display = 'none'; cartSection.setAttribute('aria-hidden','true');
}

/* Checkout guard and WA message (unchanged) */
function checkout(){
  if(cart.length === 0){ alert('Cart is empty. Add posters to proceed.'); return; }
  const pm = paymentMethodEl.value;
  const totals = computeCartTotals(pm);

  if(totals.totalQty < 3){
    alert('Minimum order is 3 posters for delivery. Please add more items to proceed.');
    return;
  }

  const firstItem = cart[0];
  let msgParts = [];
  if(firstItem && firstItem.src){
    msgParts.push(`${firstItem.src}`);
  }
  msgParts.push(`*Order from Okurimono.in*`);
  msgParts.push(`Payment: ${pm.toUpperCase()}`);
  msgParts.push(`Unit price per item (based on total items ${totals.totalQty}): ‚Çπ${totals.unitPrice}`);
  msgParts.push(`Items:`);
  cart.forEach(it => {
    msgParts.push(`‚Ä¢ ${it.title} x ${it.qty} @ ‚Çπ${totals.unitPrice} = ‚Çπ${totals.unitPrice*it.qty}`);
  });
  msgParts.push(`Total Items: ${totals.totalQty}`);
  msgParts.push(`Items total: ‚Çπ${totals.itemsTotal}`);
  if(totals.codFee) msgParts.push(`COD fee: ‚Çπ${totals.codFee}`);
  if(totals.advanceNow) msgParts.push(`Advance now: ‚Çπ${totals.advanceNow} (Remaining on delivery: ‚Çπ${(totals.grandTotal - totals.advanceNow)})`);
  msgParts.push(`Grand total: ‚Çπ${totals.grandTotal}`);
  msgParts.push(`\nPlease pack securely. If any item is damaged on delivery, I will share an unboxing video for replacement.`);

  const finalMessage = encodeURIComponent(msgParts.join('\n'));
  const url = `https://wa.me/${WA_PHONE}?text=${finalMessage}`;
  window.open(url, '_blank');
}

/* toast */
let toastTimeout;
function showToast(text){
  clearTimeout(toastTimeout);
  toastEl.textContent = text;
  toastEl.style.display = 'block';
  toastTimeout = setTimeout(()=>{ toastEl.style.display = 'none'; }, 1400);
}

/* === Lightbox + interactions === */
let clickableItems = [];
let currentIndex = -1;

const lightbox = document.getElementById('lightbox');
const lbBackdrop = document.getElementById('lbBackdrop');
const lbContent = document.getElementById('lbContent');
const lbImage = document.getElementById('lbImage');
const lbDesc = document.getElementById('lbDesc');
const lbClose = document.getElementById('lbClose');
const lbPrev = document.getElementById('lbPrev');
const lbNext = document.getElementById('lbNext');

function bindInteractiveElements(){
  clickableItems = Array.from(document.querySelectorAll('.gallery-grid img, .combo-grid img, .frame-wrap img, .hero-card img, .strip-card img'))
    .map(img => ({ el: img, src: img.getAttribute('src'), title: img.dataset.title || img.getAttribute('alt') || '' }));

  clickableItems.forEach((it) => {
    it.el.style.cursor = 'zoom-in';
    it.el.onclick = (e)=> { e.stopPropagation(); const findIndex = clickableItems.findIndex(x=>x.el===it.el); if(findIndex!==-1) openLightbox(findIndex); };
  });

  // add-to-cart buttons
  document.querySelectorAll('.add-to-cart').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      e.stopPropagation();
      const id = btn.dataset.id || `${Date.now()}`;
      const title = btn.dataset.title || 'Poster';
      const src = btn.dataset.src || '';
      addToCart({ id, title, src });
    });
  });

  // non-cart buy buttons (open wa)
  document.querySelectorAll('.buy-btn:not(.add-to-cart)').forEach(btn=>{
    btn.onclick = (e)=>{
      e.stopPropagation();
      const id = btn.dataset.id || '';
      const title = btn.dataset.title || 'Poster';
      const base = `Hi I am interested in your poster collection! Poster: ${title} (ID: ${id})`;
      const url = `https://wa.me/${WA_PHONE}?text=${encodeURIComponent(base)}`;
      window.open(url, '_blank');
    };
  });

  document.querySelectorAll('.buy-main').forEach(b=>{
    b.onclick = ()=> {
      const title = b.dataset.title || '6-Poster Combo';
      const base = `Hi I am interested in your poster collection! Product: ${title}`;
      const url = `https://wa.me/${WA_PHONE}?text=${encodeURIComponent(base)}`;
      window.open(url, '_blank');
    };
  });
}

function openLightbox(index){
  if(index < 0 || index >= clickableItems.length) return;
  currentIndex = index;
  const it = clickableItems[currentIndex];
  lbImage.src = it.src;
  lbImage.alt = it.title || '';
  lbDesc.innerHTML = `<strong style="display:block;margin-bottom:6px">${esc(it.title)}</strong>`;
  lightbox.setAttribute('aria-hidden','false');
  lightbox.classList.add('active');
  gsap.fromTo('#lightbox .backdrop', {opacity:0}, {opacity:1, duration:0.28});
  gsap.fromTo('#lbContent', {y:30, opacity:0}, {y:0, opacity:1, duration:0.36, delay:0});
}
function closeLightbox(){ lightbox.setAttribute('aria-hidden','true'); gsap.to('#lbContent', {y:20, opacity:0, duration:0.22}); gsap.to('#lightbox .backdrop', {opacity:0, duration:0.22, onComplete: ()=> { lightbox.classList.remove('active'); lbImage.src = ''; currentIndex = -1; }}); }
lbClose.addEventListener('click', closeLightbox);
lbBackdrop.addEventListener('click', closeLightbox);
document.addEventListener('keydown', (e)=>{ if(lightbox.classList.contains('active')){ if(e.key === 'Escape') closeLightbox(); if(e.key === 'ArrowLeft') prevItem(); if(e.key === 'ArrowRight') nextItem(); } });
function prevItem(){ if(currentIndex <= 0) currentIndex = clickableItems.length - 1; else currentIndex--; openLightbox(currentIndex); }
function nextItem(){ if(currentIndex >= clickableItems.length - 1) currentIndex = 0; else currentIndex++; openLightbox(currentIndex); }
lbPrev.addEventListener('click', (e)=>{ e.stopPropagation(); prevItem(); });
lbNext.addEventListener('click', (e)=>{ e.stopPropagation(); nextItem(); });

/* Scroller */
function initAutoScroller(){
  let pos = 0;
  const speed = 0.4;
  let rafId;
  const scroller = scrollerEl;
  function step(){
    pos += speed;
    if(scroller.scrollWidth > scroller.clientWidth){
      if(pos >= scroller.scrollWidth/2) pos = 0;
      scroller.style.transform = `translateX(-${pos}px)`;
    }
    rafId = requestAnimationFrame(step);
  }
  if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){
    rafId = requestAnimationFrame(step);
    scroller.addEventListener('mouseenter', ()=> cancelAnimationFrame(rafId));
    scroller.addEventListener('mouseleave', ()=> { rafId = requestAnimationFrame(step); });
  }
}

/* Mobile nav */
const mobileNav = document.getElementById('mobileNav');
function setupMobileNav(){
  const links = [
    {label:'Gallery', href:'#gallery'},
    {label:'Product', href:'#product'},
    {label:'Frames', href:'#frameGallerySection'},
    {label:'Contact', href:'#contact'}
  ];
  mobileNav.innerHTML = links.map(l=>`<a href="${l.href}" style="display:block;padding:8px 10px;color:var(--text);text-decoration:none">${l.label}</a>`).join('');
  mobileNav.querySelectorAll('a').forEach(a=>{
    a.addEventListener('click', (e)=>{
      e.preventDefault();
      const id = a.getAttribute('href').replace('#','');
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
      mobileNav.style.display='none';
      mobileNav.setAttribute('aria-hidden','true');
    });
  });
  document.getElementById('hamburgerBtn').addEventListener('click', ()=>{
    if(mobileNav.style.display === 'block'){ mobileNav.style.display='none'; mobileNav.setAttribute('aria-hidden','true'); }
    else { mobileNav.style.display='block'; mobileNav.setAttribute('aria-hidden','false'); }
  });
}

/* GSAP animations (kept) */
function initGSAP(){
  gsap.registerPlugin(ScrollTrigger);
  gsap.defaults({ease:'power1.out'});

  gsap.from('.hero-headline', {opacity:0,y:30,duration:0.8});
  gsap.from('.hero-sub', {opacity:0,y:20,duration:0.6,delay:0.12});
  gsap.to('.hero-card img', {scale:1.02, yoyo:true, repeat:-1, duration:5, stagger:0.6});

  const sections = gsap.utils.toArray('.section');
  ScrollTrigger.batch(sections, {
    interval: 0.12,
    batchMax: 6,
    onEnter: batch => gsap.fromTo(batch, {y:20, opacity:0}, {y:0, opacity:1, stagger:0.08, duration:0.6, overwrite:true}),
    start: 'top 85%',
    once: false
  });

  const promoWords = ['Limited Drops','Free Shipping','Gift-ready Frames','Kodak 180 GSM','COD Available'];
  let pIdx = 0;
  setInterval(()=> {
    pIdx = (pIdx+1) % promoWords.length;
    gsap.to('#promoLoop', {duration:0.25, opacity:0, y:-6, onComplete(){
      document.getElementById('promoLoop').textContent = promoWords[pIdx];
      gsap.fromTo('#promoLoop',{y:6,opacity:0},{y:0,opacity:1,duration:0.35});
    }});
  }, 2600);
}

/* Nav active update */
function updateActiveNavOnScroll(){
  const navLinks = Array.from(document.querySelectorAll('nav.primary a'));
  const sections = navLinks.map(a => {
    const id = a.getAttribute('href').replace('#','');
    return document.getElementById(id);
  });
  let lastIndex = 0;
  const threshold = window.innerHeight * 0.35;
  sections.forEach((s, i) => { if(!s) return; const rect = s.getBoundingClientRect(); if(rect.top <= threshold) lastIndex = i; });
  navLinks.forEach((a, i) => a.classList.toggle('active', i===lastIndex));
}
window.addEventListener('scroll', updateActiveNavOnScroll);
window.addEventListener('resize', updateActiveNavOnScroll);

/* Setup filter buttons to filter both gallery and frames */
function setupFilters(){
  document.querySelectorAll('.filter-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const cat = btn.dataset.cat || '';
      activeCategory = cat;
      // re-render both poster gallery and frames (frames filtered by cat)
      renderGallery(1);
      renderFrames(cat);
    });
  });
}

/* Init */
document.addEventListener('DOMContentLoaded', ()=>{
  loadCart();

  renderHeroImages();
  renderScrollingStrip();
  renderMainProduct();
  renderCombos();
  renderFrames(); // show all frames initially
  renderGallery(1);

  bindInteractiveElements();
  initAutoScroller();
  setupMobileNav();
  initGSAP();
  updateActiveNavOnScroll();

  setupFilters(); // <-- important: wire up filter buttons to filter frames too

  refreshCartUI();

  // open cart / close cart
  openCartBtn.addEventListener('click', ()=> openCart());
  closeCartBtn.addEventListener('click', ()=> closeCart());

  // payment change
  paymentMethodEl.addEventListener('change', ()=> refreshCartUI());

  // checkout
  checkoutBtn.addEventListener('click', ()=> checkout());

  // contact whatsapp
  const contactWhatsAppBtn = document.getElementById('contactWhatsAppBtn');
  contactWhatsAppBtn.addEventListener('click', ()=> {
    const base = `Hi I am interested in your poster collection!`;
    window.open(`https://wa.me/${WA_PHONE}?text=${encodeURIComponent(base)}`, '_blank');
  });

  // custom order
  const customWhatsAppBtn = document.getElementById('customWhatsAppBtn');
  if(customWhatsAppBtn) customWhatsAppBtn.addEventListener('click', ()=> {
    const base = `Hi I want a custom printed frame. Please assist.`;
    window.open(`https://wa.me/${WA_PHONE}?text=${encodeURIComponent(base)}`, '_blank');
  });

  bindInteractiveElements();
});
</script>
</body>
</html>

